<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ê°„ë‹¨ ìŠ¬ë¡¯ ë¨¸ì‹ </title>
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --accent:#f59e0b;
    --muted:#94a3b8;
    --win:#16a34a;
    --lose:#ef4444;
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Noto Sans KR',sans-serif;background:linear-gradient(180deg,#071025 0%, #0f1724 100%);color:#e6eef8}
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:32px;box-sizing:border-box;}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:24px;width:100%;max-width:720px;box-shadow: 0 10px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}
  h1{margin:0 0 12px;font-size:20px;letter-spacing:-0.02em}
  p.lead{margin:0 0 18px;color:var(--muted);font-size:13px}
  .machine{display:flex;gap:14px;align-items:center;justify-content:center;margin-bottom:16px}
  .reel{width:120px;height:120px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;display:flex;align-items:center;justify-content:center;box-shadow: inset 0 -6px 20px rgba(2,6,23,0.5);overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
  .symbols{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:10px;transform:translateY(0);transition:transform 0.2s linear}
  .symbol{width:100%;height:120px;display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:700}
  .symbol.small{font-size:22px}
  .controls{display:flex;gap:12px;align-items:center;justify-content:center;margin-bottom:12px}
  button{background:var(--accent);border:0;padding:10px 18px;border-radius:10px;color:#041024;font-weight:700;cursor:pointer;box-shadow:0 8px 18px rgba(245,158,11,0.14);font-size:15px}
  button:disabled{opacity:0.5;cursor:not-allowed}
  .info{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
  .status{padding:10px 12px;border-radius:10px;background:rgba(255,255,255,0.02);font-size:14px;color:var(--muted)}
  .result{margin-top:12px;padding:12px;border-radius:10px;font-weight:700;text-align:center}
  .result.win{background:linear-gradient(90deg, rgba(22,163,74,0.12), rgba(22,163,74,0.06));color:var(--win)}
  .result.lose{background:linear-gradient(90deg, rgba(239,68,68,0.08), rgba(239,68,68,0.03));color:var(--lose)}
  .legend{margin-top:8px;color:var(--muted);font-size:13px}
  @media (max-width:560px){
    .machine{gap:8px}
    .reel{width:86px;height:86px}
    .symbol{font-size:20px}
    button{padding:8px 12px}
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card" role="application" aria-labelledby="title">
    <h1 id="title">ìŠ¬ë¡¯ ë¨¸ì‹ </h1>
    <p class="lead">ë‹¹ì²¨ í™•ë¥ : <strong>10%</strong> Â· ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¦´ì„ ëŒë ¤ë³´ì„¸ìš”. (ëŒì•„ê°€ëŠ” ì‹œê°„ 3~6ì´ˆ)</p>

    <div class="machine" aria-hidden="false">
      <div class="reel" id="reel1" aria-label="ë¦´ 1">
        <div class="symbols" id="symbols1"></div>
      </div>
      <div class="reel" id="reel2" aria-label="ë¦´ 2">
        <div class="symbols" id="symbols2"></div>
      </div>
      <div class="reel" id="reel3" aria-label="ë¦´ 3">
        <div class="symbols" id="symbols3"></div>
      </div>
    </div>

    <div class="controls">
      <button id="spinBtn" aria-pressed="false">ëŒë¦¬ê¸°</button>
      <div class="status" id="timeStatus">ì¤€ë¹„ë¨</div>
      <div class="status" id="lastResult">ìµœê·¼: -</div>
    </div>

    <div id="resultBox" class="result" aria-live="polite" style="display:none">ê²°ê³¼</div>
    <div class="legend">ì‹¬ë³¼: ğŸ’ ğŸ‹ â­ 7ï¸âƒ£ ğŸ’ (ê²°ê³¼ëŠ” ë¬´ì‘ìœ„ë¡œ ê²°ì •ë©ë‹ˆë‹¤)</div>
  </div>
</div>

<script>
/*
  ìŠ¬ë¡¯ ë¡œì§ ì„¤ëª…:
  - ì „ì²´ ë‹¹ì²¨ í™•ë¥ ì€ spin() í˜¸ì¶œë‹¹ 10% (0.10)
  - ë‹¹ì²¨ì´ë©´ 3ê°œì˜ ë¦´ ëª¨ë‘ ê°™ì€ 'ë‹¹ì²¨ ì‹¬ë³¼'ë¡œ ë©ˆì¶¤
  - ë¹„ë‹¹ì²¨ì´ë©´ ì„ì˜ì˜ ì‹¬ë³¼ë“¤ë¡œ ë©ˆì¶¤ (ê°™ì´ ë§ì•„ë„ ìš°ì—°)
  - ê° ë¦´ì€ JSë¡œ ë¹ ë¥´ê²Œ ì‹¬ë³¼ì„ ë°”ê¿” ì• ë‹ˆë©”ì´ì…˜ì„ í‰ë‚´ëƒ„
  - ìŠ¤í•€ ì‹œê°„ì€ 3~6ì´ˆ(ëœë¤). ë¦´ë³„ë¡œ ì •ì§€ ì§€ì—°ì„ ë‹¬ë¦¬í•´ ìì—°ìŠ¤ëŸ½ê²Œ ë©ˆì¶¤
*/

const SYMBOLS = ['ğŸ’','ğŸ‹','â­','7ï¸âƒ£','ğŸ’'];
const WIN_SYMBOL = 'ğŸ’';       // ë‹¹ì²¨ ì‹œ ë³´ì—¬ì¤„ ì‹¬ë³¼ (ì„ì˜ ì„ íƒ)
const WIN_RATE = 0.10;        // 10%

const symbolsElems = [
  document.getElementById('symbols1'),
  document.getElementById('symbols2'),
  document.getElementById('symbols3')
];

const spinBtn = document.getElementById('spinBtn');
const timeStatus = document.getElementById('timeStatus');
const lastResult = document.getElementById('lastResult');
const resultBox = document.getElementById('resultBox');

let spinning = false;
let spinIntervals = [];

// ì´ˆê¸° ì‹¬ë³¼ ì±„ìš°ê¸° (ê° ë¦´ì— ì—¬ëŸ¬ ì‹¬ë³¼ì„ ìŒ“ì•„ë†“ìœ¼ë©´ ë¹ ë¥´ê²Œ ë°”ë€ŒëŠ” íš¨ê³¼)
function initReels(){
  for(let i=0;i<symbolsElems.length;i++){
    const el = symbolsElems[i];
    el.innerHTML = '';
    // ì¤‘ë³µìœ¼ë¡œ ì‹¬ë³¼ì„ ë„£ì–´ ë£¨í”„ ëŠë‚Œ
    for(let j=0;j<10;j++){
      const s = document.createElement('div');
      s.className = 'symbol' + (j>5 ? ' small' : '');
      s.textContent = SYMBOLS[(i + j) % SYMBOLS.length];
      el.appendChild(s);
    }
  }
}
initReels();

function pickRandom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

// ì‹¤ì œ ìŠ¤í•€ ë¡œì§
async function spin(){
  if(spinning) return;
  spinning = true;
  spinBtn.disabled = true;
  spinBtn.setAttribute('aria-pressed','true');
  resultBox.style.display = 'none';
  resultBox.className = 'result';
  timeStatus.textContent = 'ìŠ¤í•€ ì¤‘...';

  // ì „ì²´ ìŠ¤í•€ ì‹œê°„ (ms)
  const totalTime = (3000 + Math.floor(Math.random()*3000)); // 3000 ~ 5999 ms
  // ë‹¹ì²¨ ì—¬ë¶€ ê²°ì • (ì „ì²´ í™•ë¥ )
  const isWin = Math.random() < WIN_RATE;

  // determine final symbols for each reel
  let finalSymbols;
  if(isWin){
    finalSymbols = [WIN_SYMBOL, WIN_SYMBOL, WIN_SYMBOL];
  } else {
    // ë¹„ë‹¹ì²¨: ê° ë¦´ì— ë¬´ì‘ìœ„ ì‹¬ë³¼ (ê°™ì€ê²Œ ë‚˜ì™€ë„ ê·¸ê±´ ìš°ì—°)
    finalSymbols = [pickRandom(SYMBOLS), pickRandom(SYMBOLS), pickRandom(SYMBOLS)];
  }

  // ê° ë¦´ì„ ë¹¨ë¦¬ ë°”ê¿”ì¹˜ê¸°
  spinIntervals.forEach(id=>clearInterval(id));
  spinIntervals = [];

  // ë¹ ë¥´ê²Œ ì‹¬ë³¼ ë°”ë€ŒëŠ” íš¨ê³¼ ì‹œì‘
  for(let i=0;i<symbolsElems.length;i++){
    const el = symbolsElems[i];
    const interval = setInterval(()=> {
      // ë§¨ ìœ„ì— ìˆëŠ” ì‹¬ë³¼ì„ ì˜ë¼ë‚´ê³  ëì— ìƒˆ ì‹¬ë³¼ ì¶”ê°€ (visual)
      const children = el.children;
      if(children.length){
        el.removeChild(children[0]);
        const newSym = document.createElement('div');
        newSym.className = 'symbol';
        newSym.textContent = pickRandom(SYMBOLS);
        el.appendChild(newSym);
        // transformìœ¼ë¡œ ì¡°ê¸ˆ ì´ë™ íš¨ê³¼ ì¤„ ìˆ˜ ìˆìŒ
        // (ê°„ë‹¨: ì•ˆì”€ â€” CSS transitionìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ì •ì§€ ì—°ì¶œ)
      }
    }, 80 + Math.floor(Math.random()*40)); // ì¡°ê¸ˆì”© ë‹¤ë¥¸ ì†ë„
    spinIntervals.push(interval);
  }

  // ê° ë¦´ ì •ì§€ ì‹œê°ì„ ëœë¤í•˜ê²Œ ë¶„ì‚° (totalTime + small offsets)
  const stopTimes = [
    totalTime * (0.75 + Math.random()*0.1), // reel1 stop
    totalTime * (0.88 + Math.random()*0.07), // reel2
    totalTime * (1.00) // reel3 stops at totalTime
  ];

  // ë¦´ë³„ë¡œ ë©ˆì¶”ë©´ì„œ ìµœì¢… ì‹¬ë³¼ë¡œ êµì²´
  for(let i=0;i<symbolsElems.length;i++){
    await wait(stopTimes[i] - (i===0 ? 0 : stopTimes[i-1]));
    // stop interval for this reel
    clearInterval(spinIntervals[i]);
    // animate final alignment: replace all children with a single final symbol element at top
    const el = symbolsElems[i];
    el.innerHTML = '';
    const final = document.createElement('div');
    final.className = 'symbol';
    final.textContent = finalSymbols[i];
    el.appendChild(final);
  }

  // ê²°ê³¼ ë³´ì—¬ì£¼ê¸°
  spinning = false;
  spinBtn.disabled = false;
  spinBtn.setAttribute('aria-pressed','false');
  timeStatus.textContent = `ëŒë¦¼ ì‹œê°„: ${(totalTime/1000).toFixed(2)}ì´ˆ`;
  lastResult.textContent = `ìµœê·¼: ${isWin ? 'ë‹¹ì²¨' : 'ê½'}`;

  if(isWin){
    resultBox.textContent = 'ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ë‹¹ì²¨ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰';
    resultBox.classList.add('win');
  } else {
    resultBox.textContent = 'ì•„ì‰½ì§€ë§Œ ê½ì…ë‹ˆë‹¤. ë‹¤ìŒì— ë‹¤ì‹œ ë„ì „í•˜ì„¸ìš”.';
    resultBox.classList.add('lose');
  }
  resultBox.style.display = 'block';
}

// ë„ìš°ë¯¸: ms ëŒ€ê¸°
function wait(ms){ return new Promise(res=>setTimeout(res, ms)); }

spinBtn.addEventListener('click', ()=> {
  spin();
});

// í‚¤ë³´ë“œë¡œ ìŠ¤í˜ì´ìŠ¤ë°” ëˆ„ë¥´ë©´ ëŒë¦¬ê¸° (ì ‘ê·¼ì„±)
document.addEventListener('keydown', (e)=>{
  if(e.code === 'Space' && !e.repeat){
    e.preventDefault();
    spinBtn.click();
  }
});
</script>
</body>
</html>
